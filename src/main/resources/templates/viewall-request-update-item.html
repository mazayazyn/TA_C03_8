<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="UTF-8">
    <title> List Item </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
          crossorigin="anonymous">
    <script
            src="https://code.jquery.com/jquery-3.4.1.min.js"
            integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFIBw8HfCJo="
            crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
            integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
            crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
            integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
            crossorigin="anonymous">
    </script>
    <!--    <object th:include="fragments/fragment :: css" th:remove="tag"></object>-->
    <!--    <object th:include="fragments/fragment :: js" th:remove="tag"></object>-->
</head>

<body>
<!--<nav th:replace="fragments/fragment :: navbar"></nav>-->
<div class="container-sm rounded w-75 p-5 my-3" sec:authorize="hasAnyAuthority('STAFF_GUDANG', 'STAFF_OPERASIONAL')">
    <div class="card m-4 p-4 border border-warning">
        <div class="card-body">
            <div class="justify-content-center">
                <h1 class="font-weight-bold" style="color: #62433E; text-align: center">List Item</h1>
                <br> <br>
                <!--                <a th:href="@{/store/add}" class="mx-2 btn" style="color: white; background-color: #EF974F; width: 150px">+ Add Store</a>-->
                <!--                <br> <br>-->
                <table class="table table-striped">
                    <thead>
                    <tr class="text-white" style="text-align: center; background-color: #62433E" >
                        <th>No</th>
                        <th>ID Request</th>
                        <th>Nama Item</th>
                        <th>Kategori</th>
                        <th>Stok Tambahan</th>
                        <th>Executed</th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="request, iterationStatus : ${listRequest}" style="text-align: center">
                        <td th:text="${iterationStatus.count}"></td>
                        <td th:text="${request.id_request_update_item}"></td>
                        <div th:each="item : ${listItem}">
                            <td th:if="${item.uuid} == ${request.id_item}" th:text="${item.nama}"></td>
                        </div>
                        <td th:text="${request.kategori}"></td>
                        <td th:text="${request.tambahan_stok}"></td>
                        <td th:if="${request.executed} == false" th:text="❌"></td>
                        <td th:if="${request.executed} == true" th:text="✔️"></td>
                        <td>
                            <!--                            TODO: sinkronkan href dgn mapping di controller yang merender template detail & update-->
                            <a class="btn btn-sm btn-primary" th:href="@{/request/} + ${request.id_request_update_item}">Detail</a>
                            <a sec:authorize="hasAnyAuthority('STAFF_GUDANG')" class="btn btn-sm btn-warning" th:href="@{/request/update} + ${request.id_request_update_item}">Update</a>
                            <!--                            <a class="btn btn-sm btn-danger" th:href="@{/store/delete/} + ${store.idStore}">Delete</a>-->
                        </td>
                    </div>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
</body>

</html>